// Navigation
//
// Primary site navigation
//
// Elements:
// .site-nav                        - The outer nav element
// .site-nav__list                  - ul that displays horizontally on desktop and is hidden on mobile until revealed
// .site-nav__panel                 - Container that gets revealed
// .site-nav__item                  - Each li inside the ul
// .site-nav__link                  - Styles for the links inside the items
// .site-nav__dropdown              - A ul inside a site-nav__item li. On mobile, this expands on tap (see below) and on desktop, shows on hover
// .site-nav__toggle                - A button inside each .site-nav__item--with-dropdown that controls visibility of the submenu
//
// Styleguide modules.navigation

.site-nav {
  @include clearfix();

  &.is-open {

    // When the menu is open, set all sub-panels 100% off
    .site-nav__panel--sub {
      @include transform(translateX(100%));

      // When subpanels open, set them to 0
      &.is-open {
        @include transform(translateX(0));
      }
    }

    .site-nav__container {
      @include transform(translateX(0));
      @include transition(transform, .2s, ease-out);
    }
  }
}
.site-nav__container {
  @include transform(translateX(-100%));
  @include transition(left, .2s, ease-out);
  position: absolute;
  left: 0;
  right: 0;
  top: 6.3rem;
  bottom: 0;
  z-index: $z-navigation;

  &[aria-hidden='true'] {
    display: block !important; // It's hidden by the transform, so this keeps it visible when it slides in
  }
}

.site-nav__panel {
  @include transition(transform, .2s, ease-out);
  background-color: $primary;
  color: $inverse;
  font-size: 1.6rem;
  padding: 1rem 2rem;
  position: absolute;
  top: 0;
  bottom: 0;
  width: 100%;

  &.is-open {
    @include transform(translateX(0));
  }

  &[aria-hidden='true'] {
    display: block !important; // It's hidden by the transform, so this keeps it visible when it slides in
  }

  .utility-nav__item {
    padding: 0;
  }
}

.site-nav__panel--sub {
  @include transform(translateX(200%));

  @include media($lg) {
    display: none;
  }
}

.site-nav__item {
  @include clearfix();
  border-bottom: 1px solid $inverse;

  &:last-child .site-nav__link {
    border-bottom: 0;
  }

  &.is-disabled {
    opacity: 1;

    .site-nav__link {
      color: $disabled;
    }
  }
}

// .site-nav__link
.site-nav__link {
  @include transition(background-color, .1s);
  color: $inverse;
  display: block;
  font-size: inherit;
  font-family: $serif;
  line-height: 2rem;
  padding: 1rem;
  border-bottom: none;
  width: 100%;
  text-align: left;
}

.site-nav__toggle {
  @include u-icon-bg($arrow-right, $inverse);
  background-position: 0 50%;
  background-size: 1rem;
  color: $inverse;
  font-family: $serif;
  text-align: left;
  padding-left: 2rem;
  position: relative;
  width: 100%;
}

// Nav Buttons
//
// For the mobile menu toggle and glossary toggle
//
// .site-nav__button--left      - Mobile toggle
// .site-nav__button--right     - Glossary toggle

.site-nav__button {
  background-color: $gray-lightest;
  border-radius: 0;
  border: none;
  margin: 0;
  padding: 1.8rem 2rem;
  text-indent: -99999px;
}

.site-nav__button--left {
  @include u-icon-bg($menu, $primary);
  background-position: 50% 50%;
  background-size: 2rem;
  float: left;
  height: 4rem;

  &:hover {
    background-color: $inverse;
  }

  &.active {
    @include u-icon-bg($menu, $inverse);
    background-color: $primary;
    color: $neutral;
  }
}

.site-nav__button--right {
  @include u-icon-bg($book, $secondary);
  background-position: 50% 50%;
  background-size: 2rem;
  float: right;
  height: 4rem;

  &:hover {
    @include u-icon-bg($book, $inverse);
    background-color: lighten($secondary, 10%);
  }
}

// BREAKPOINT: MEDIUM
// Mostly stays the same except the menu button now has the word menu in it

@include media($med) {
  .site-nav__container {
    top: 11.6rem;
  }

  .site-nav__button--left {
    background-position: 90% 1rem;
    font-size: 1.4rem;
    text-indent: 0;
    padding: 1rem 4rem 1rem 1rem;

    &.active {
      background-position: 90% 1rem;
    }
  }
}

// BREAKPOINT: LARGE
// Switches to traditional dropdown menu
// Hide the submenu toggles

@include media($lg) {
  .site-nav__container {
    @include clearfix();
    @include transform(translateX(0));
    top: 0;
    position: relative;
    width: 100%;
    float: left;
    background: $inverse;
  }

  .site-nav__panel--sub {
    @include transform(translateX(0));
  }

  .site-nav__panel {
    @include transform(translateX(0));
    background: none;
    border: none;
    min-height: 0;
    height: auto;
    overflow: visible;
    position: relative;
    display: block;
    padding: 0 0 0 2rem;
    top: 0;

    .utility-nav__item {
      display: none;
    }
  }

  .site-nav__item {
    float: left;
    border-bottom: none;
    color: $primary;

    &.is-open,
    &:hover {
      .site-nav__link {
        border-bottom-color: transparent;
        background-color: $primary;
        color: $gray-lightest;
      }
    }

    &.is-disabled {
      .site-nav__link {
        color: $disabled;
        cursor: default;

        &:hover,
        &:focus {
          background-color: transparent;
        }
      }

      &:hover,
      &:focus {
        background-color: transparent;
      }
    }
  }

  .site-nav__link {
    color: $primary;
    text-align: center;
    border-bottom: .5rem solid transparent;
    padding: 1rem 2rem .5rem 2rem;

    &:hover,
    &:focus,
    &:active {
      border-bottom-color: transparent;
      background-color: $primary;
      color: $gray-lightest;
    }

    &.is-parent {
      border-color: $navy;
    }
  }

  .site-nav__button--left {
    display: none;
  }
}

.site-nav__back {
  background-position: 0 50%;
  border: none;
  padding: 0 0 0 2rem;
  font-size: 1.4rem;
}

.site-nav__title {
  border-bottom: 1px solid $inverse;
  padding: 1rem 0;
  margin: 0;
}

.site-nav__item--sub {
  padding-left: 1rem;
}

.site-nav__block {
  @include clearfix();
  border-bottom: 1px solid $inverse;
  padding: 1.6rem 2rem 2rem 2rem;
}
