// Navigation
//
// Primary site navigation
//
// Elements:
// .site-nav                        - The outer nav element
// .site-nav__list                  - ul that displays horizontally on desktop and is hidden on mobile until revealed
// .site-nav__item                  - Each li inside the ul
// .site-nav__link                  - Styles for the links inside the items
// .site-nav__dropdown              - A ul inside a site-nav__item li. On mobile, this expands on tap (see below) and on desktop, shows on hover
// .site-nav__toggle                - A button inside each .site-nav__item--with-dropdown that controls visibility of the submenu
//
// Styleguide modules.navigation

.site-nav {
  @include clearfix();

  &.is-open {
    .site-nav__list {
      @include transform(translateX(0));
    }

    .site-nav__dropdown {
      display: block;
    }
  }
}

.site-nav__list {
  @include transform(translateX(-100%));
  @include transition(transform, .2s);
  background-color: $primary;
  border-right: 1px solid $primary-contrast;
  padding: u(1rem 2rem);
  position: absolute;
  left: 0;
  top: u(7rem);
  bottom: 0;
  z-index: $z-navigation;

  &[aria-hidden='true'] {
    display: block !important; // It's hidden by the transform, so this keeps it visible when it slides in
  }

  .utility-nav__item {
    padding: 0;
  }
}

.site-nav__item {
  border-bottom: 1px solid $primary-contrast;

  &:last-child .site-nav__link {
    border-bottom: 0;
  }

  &.is-disabled {
    opacity: 1;

    .site-nav__link {
      color: $disabled;
    }
  }
}

// .site-nav__link
.site-nav__link {
  @include transition(background-color, .1s);
  color: $inverse;
  display: block;
  font-size: u(1.6rem);
  line-height: u(2rem);
  padding: u(1rem);
  border-bottom: none;

  &.is-current {
    border-bottom-color: $aqua;
  }

  &.is-active {
    background-color: $primary;
    color: $primary-contrast;
  }
}

.site-nav__subtitle {
  display: block;
  margin: 0;
  font-size: u(1.4rem);
  padding: u(1rem);
}

.site-nav__dropdown {
  font-family: $sans-serif;
  display: none;
  padding-bottom: u(2rem);

  &[aria-hidden='false'] {
    display: block;
  }

  .site-nav__item {
    border-bottom: 0;
  }

  .site-nav__link {
    padding: u(.5rem 1rem);
    font-size: u(1.4rem);
    white-space: nowrap;
  }

  .site-nav__sublink {
    padding-left: u(2rem);
  }
}

.site-nav__toggle {
  @include u-icon-bg($arrow-right, $inverse);
  background-position: 0 50%;
  background-size: u(1rem);
  color: $inverse;
  font-family: $serif;
  text-align: left;
  padding-left: u(2rem);
  position: relative;
  width: 100%;
}

// Nav Buttons
//
// For the mobile menu toggle and glossary toggle
//
// .site-nav__button--left      - Mobile toggle
// .site-nav__button--right     - Glossary toggle

.site-nav__button {
  background-color: $gray-lightest;
  border-radius: 0;
  border: none;
  margin: 0;
  padding: u(1.8rem 2rem);
  text-indent: -99999px;
}

.site-nav__button--left {
  @include u-icon-bg($menu, $primary);
  background-position: 50% 50%;
  background-size: u(2rem);
  float: left;
  height: u(4rem);

  &:hover {
    background-color: $inverse;
  }

  &.active {
    @include u-icon-bg($menu, $inverse);
    background-color: $primary;
    color: $neutral;
  }
}

.site-nav__button--right {
  @include u-icon-bg($book, $secondary);
  background-position: 50% 50%;
  background-size: u(2rem);
  float: right;
  height: u(4rem);

  &:hover {
    @include u-icon-bg($book, $inverse);
    background-color: lighten($secondary, 10%);
  }
}

// BREAKPOINT: MEDIUM
// Mostly stays the same except the menu button now has the word menu in it

@include media($med) {
  .site-nav__list {
    top: u(17rem);
  }

  .site-nav__button {
    width: u(9rem);
  }

  .site-nav__button--left {
    background-position: u(90% 1rem);
    font-size: u(1.4rem);
    text-indent: 0;
    padding: u(1rem 4rem 1rem 1rem);

    &.active {
      background-position: u(90% 1rem);
    }
  }
}

// BREAKPOINT: LARGE
// Switches to traditional dropdown menu
// Hide the submenu toggles

@include media($lg) {
  .site-nav__list {
    @include clearfix();
    @include transform(translateX(0));
    background: none;
    border: none;
    min-height: 0;
    height: auto;
    overflow: visible;
    display: block;
    float: left;
    padding: u(0 0 0 2rem);
    top: 0;
    position: relative;
    width: 100%;

    .utility-nav__item {
      display: none;
    }
  }

  .site-nav__item {
    float: left;
    border-bottom: none;
    color: $primary;

    &.is-open,
    &:hover {
      .site-nav__link {
        border-bottom-color: transparent;
        background-color: $primary;
        color: $gray-lightest;
      }
    }

    &.is-disabled {
      .site-nav__link {
        color: $disabled;
        cursor: default;

        &:hover,
        &:focus {
          background-color: transparent;
        }
      }

      &:hover,
      &:focus {
        background-color: transparent;
      }
    }
  }

  .site-nav__link {
    color: $primary;
    border-bottom: .5rem solid transparent;
    padding: u(1rem 2rem .5rem 2rem);

    &:hover,
    &:focus,
    &:active {
      border-bottom-color: transparent;
      background-color: $primary;
      color: $gray-lightest;
    }

    &.is-parent {
      border-color: $navy;
    }
  }

  .site-nav__button--left {
    display: none;
  }
}
