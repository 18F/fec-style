// Navigation
//
// Primary site navigation
//
// Elements:
// .site-nav                        - The outer nav element
// .site-nav__list                  - ul that displays horizontally on desktop and is hidden on mobile until revealed
// .site-nav__item                  - Each li inside the ul
// .site-nav__link                  - Styles for the links inside the items
// .site-nav__dropdown              - A ul inside a site-nav__item li. On mobile, this expands on tap (see below) and on desktop, shows on hover
// .site-nav__item--with-dropdown   - Parent items that have a submenu dropdown
// .site-nav__toggle                - A button inside each .site-nav__item--with-dropdown that controls visibility of the submenu
//
// Markup:
// <nav class="site-nav js-site-nav">
//   <button for="nav-toggle" class="js-nav-toggle site-nav__button site-nav__button--left" aria-controls="site-menu">Menu</button>
//   <ul id="site-menu" class="site-nav__list">
//     <li class="site-nav__item site-nav__item--with-dropdown js-sublist-parent">
//       <a href="#" class="site-nav__link is-current js-nav-drop-link">
//           Campaign finance data</a>
//       <span class="site-nav__link site-nav__toggle js-sublist-toggle">Campaign finance data</span>
//       <ul class="site-nav__dropdown">
//         <li class="site-nav__item">
//           <a class="site-nav__link site-nav__sublink" href="#">Search for candidates »</a>
//         </li>
//         <li class="site-nav__item">
//           <a class="site-nav__link site-nav__sublink" href="#">Search for elections »</a>
//         </li>
//       </ul>
//     </li>
//     <li class="site-nav__item">
//       <a href="#" class="site-nav__link is-disabled">Calendar</a>
//     </li>
//     <li class="site-nav__item">
//       <a href="#" class="site-nav__link is-disabled">TBD</a>
//     </li>
//   </ul>
// </nav>
//
// Styleguide modules.navigation

.site-nav {
  @include clearfix();

  &.is-open {
    .site-nav__list {
      @include transform(translateX(0));
    }

    .site-nav__dropdown {
      display: block;
    }
  }
}

.site-nav__list {
  @include u-bg--primary();
  @include transform(translateX(-100%));
  @include transition(transform, .2s);
  border-right: 1px solid $primary-contrast;
  padding: 1rem 2rem;
  position: absolute;
  left: 0;
  top: 7rem;
  bottom: 0;
  z-index: $z-navigation;

  .utility-nav__item {
    padding: 0;
  }
}

.site-nav__item {
  position: relative;
  border-bottom: 1px solid $primary-contrast;

  &:last-child .site-nav__link {
    border-bottom: 0;
  }

  &.is-disabled {
    opacity: 1;

    .site-nav__link {
      color: #929292;
    }
  }
}

// .site-nav__link
.site-nav__link {
  @include transition(background-color, .1s);
  display: block;
  font-size: 1.6rem;
  line-height: 2rem;
  padding: 1rem;
  border-bottom: none;

  &.is-current {
    border-bottom-color: $aqua;
  }

  &.is-active {
    background-color: $primary;
    color: $primary-contrast;
  }
}

.site-nav__subtitle {
  display: block;
  margin: 0;
  font-size: 1.4rem;
  padding: 1rem;
}

.site-nav__dropdown {
  font-family: $sans-serif;
  display: none;
  padding-bottom: 2rem;

  &[aria-hidden='false'] {
    display: block;
  }

  .site-nav__item {
    border-bottom: 0;
  }

  .site-nav__link {
    padding: .5rem 1rem;
    font-size: 1.4rem;
    white-space: nowrap;
  }

  .site-nav__sublink {
    padding-left: 2rem;
  }
}

.site-nav__toggle {
  @include u-icon-bg($arrow-right, $inverse);
  background-position: 0 50%;
  background-size: 1rem;
  color: $inverse;
  font-family: $serif;
  text-align: left;
  padding-left: 2rem;
  position: relative;
  width: 100%;
}

.site-nav__item--with-dropdown {
  & > .site-nav__link {
    display: none;
  }

  .site-nav__toggle {
    display: block;
  }

  &.is-open {
    .site-nav__toggle {
      @include u-icon-bg($arrow-down, $primary-contrast);
      color: $primary-contrast;
    }
  }
}


// Nav Buttons
//
// For the mobile menu toggle and glossary toggle
//
// .site-nav__button--left      - Mobile toggle
// .site-nav__button--right     - Glossary toggle

.site-nav__button {
  background-color: $gray-lightest;
  border-radius: 0;
  margin: 0;
  padding: 1.8rem 2rem;
  text-indent: -99999px;
}

.site-nav__button--left {
  @include u-icon-bg($menu, $primary);
  background-position: 50% 50%;
  background-size: 2rem;
  float: left;
  height: 4rem;

  &:hover {
    background-color: $inverse;
  }

  &.active {
    @include u-icon-bg($menu, $inverse);
    background-color: $primary;
    color: $neutral;
  }
}

.site-nav__button--right {
  @include u-icon-bg($book, $secondary);
  background-position: 50% 50%;
  background-size: 2rem;
  float: right;
  height: 4rem;

  &:hover {
    @include u-icon-bg($book, $inverse);
    background-color: lighten($secondary, 10%);
  }
}

// BREAKPOINT: MEDIUM
// Mostly stays the same except the menu button now has the word menu in it

@include media($med) {
  .site-nav__list {
    top: 17rem;
  }

  .site-nav__button {
    width: 9rem;
  }

  .site-nav__button--left {
    background-position: 90% 1rem;
    font-size: 1.4rem;
    text-indent: 0;
    padding: 1rem 4rem 1rem 1rem;

    &.active {
      background-position: 90% 1rem;
    }
  }
}

// BREAKPOINT: LARGE
// Switches to traditional dropdown menu
// Hide the submenu toggles

@include media($lg) {
  .site-nav {
    padding-left: 2rem;
  }

  .site-nav__list {
    @include clearfix();
    @include u-bg--neutral();
    @include transform(translateX(0));
    background: none;
    border: none;
    min-height: 0;
    display: block;
    float: left;
    padding: 0;
    position: relative;
    top: 0;

    .utility-nav__item {
      display: none;
    }
  }

  .site-nav__item {
    float: left;
    border-bottom: none;

    &.is-open,
    &:hover {
      .site-nav__link {
        border-bottom-color: $primary-contrast;
        background-color: $primary;
        color: $gray-lightest;
      }
    }

    &.is-disabled {
      .site-nav__link {
        color: $disabled;
        cursor: default;

        &:hover,
        &:focus {
          background-color: transparent;
        }
      }

      &:hover,
      &:focus {
        background-color: transparent;
      }
    }
  }

  .site-nav__link {
    padding: 2rem;

    &:hover,
    &:focus,
    &:active {
      border-bottom-color: $primary-contrast;
      background-color: $primary;
      color: $gray-lightest;
    }
  }

  .site-nav__dropdown {
    @include u-bg--primary();
    border: 1px solid $primary-contrast;
    border-top: none;
    padding: 0;
    position: absolute;
    top: 6rem;
    z-index: $z-navigation;

    .site-nav__item {
      padding: 0 2rem;
      width: 100%;

      &:hover,
      &:focus {
        background-color: $primary-contrast;
        color: $primary;
      }

      &:first-child {
        border-top: 1px solid $primary-contrast;
      }

      &:last-child {
        .site-nav__link {
          border-bottom: none;
        }
      }
    }

    .site-nav__subtitle {
      clear: both;
      padding: 2rem 2rem 1rem 2rem;
      width: 100%;
    }

    .site-nav__link {
      @include transition(none);
      background-color: transparent;
      border-bottom: 1px solid $primary-contrast;
      padding: 2rem 0;
      width: 100%;

      &:hover,
      &:focus {
        background-color: $primary-contrast;
        color: $primary;
      }
    }

    .site-nav__sublink {
      padding: 1rem 0 1rem 2rem;
      border-bottom: none;
    }

    .site-nav__sublink--last {
      border-bottom: 1px solid $primary-contrast;
      padding-bottom: 2rem;
    }
  }

  .site-nav__item--with-dropdown {
    .site-nav__link {
      display: block;
    }

    .site-nav__toggle {
      display: none;
    }
  }

  .site-nav__button,
  .site-nav__button--right {
    height: 6rem;
  }

  .site-nav__button--left {
    display: none;
  }
}
